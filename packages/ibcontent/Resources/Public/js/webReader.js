window.ReadSpeakerDefer={deferred:null,clickhandler:function(a){if(!window.ReadSpeakerDefer.deferred){a=a||window.event;var b=a.target||a.srcElement;if(3===b.nodeType&&(b=b.parentNode),b!==document&&window.ReadSpeakerDefer.isRSLink(b)){var c=!0;if(window.rsConf&&window.rsConf.general&&window.rsConf.general.confirmPolicy&&(confirm(window.rsConf.general.confirmPolicy)||(c=!1)),c){window.ReadSpeakerDefer.deferred=b;var d=window.ReadSpeakerDefer.findRSParent(b);d&&d.className&&!/rsdeferred/i.test(d.className)&&(d.className+=" rsdeferred"),window.ReadSpeakerJIT&&(window.rspkr.createAudio(),window.rspkr.loadCore())}return a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!1}}},init:function(){this.RSDeferClick(document)},isRSLink:function(a){return this.isRSParent(a.parentNode)||a.href&&a.href.indexOf("readspeaker.com/cgi-bin/rsent")>-1},isRSParent:function(a){return a&&a!==document?a.getAttribute("class")&&a.getAttribute("class").indexOf("rsbtn")>-1||a.id&&"string"==typeof a.id&&a.id.indexOf("readspeaker_button")>-1:!1},findRSParent:function(a){for(;a.parentNode&&a.parentNode!==document&&(a=a.parentNode,"a"!==a.tagName.toLowerCase()||!this.isRSLink(a)););return a===document?void 0:a.parentNode},RSDeferClick:function(a){a.addEventListener?a.addEventListener("click",this.clickhandler,!1):a.attachEvent?a.attachEvent("onclick",this.clickhandler):a.onclick=this.clickhandler}},window.readpage=function(a,b,c){return window.rsConf&&window.rsConf.general&&window.rsConf.general.confirmPolicy&&!confirm(window.rsConf.general.confirmPolicy)?!1:(window.ReadSpeakerDefer.deferred={href:a,target:b,options:c},window.ReadSpeakerJIT&&(window.rspkr.createAudio(),window.rspkr.loadCore()),!1)},window.ReadSpeakerDefer.init(),function(a){var b=function(){var b={major:"3",minor:"0",update:"7",revision:"464",prod:"wr"},c="ReadSpeaker",d=[],e=0,f=0,g=!1,h=[],i={},j=0,k=[],l=[],m=!1,n=!1,o=0,p=!1,q=null,r="default",s=!1,t=[],u=!1,v=!1,w="",x={},y="",z=null,A=!1,B=[],C="",D=[],E=function(b){if("string"==typeof b){b="ReadSpeaker."+b.replace("_",".");for(var c=b.split("."),d=a,e=0,f=c.length;f>e;e++){if(!d)return!1;if(!d[c[e]])return!1;if(e===f-1)return d[c[e]];d=d[c[e]]}return!1}},F=function(a){function b(a){rspkr.log("[rspkr.setCoreLoaded] Done loading module "+a),h.push(a);for(var b in i)if(i[b].length)for(var c,d=i[b].length-1;c=i[b][d];d--)if((c===a||I(c))&&i[b].splice(d,1),0===i[b].length){rspkr.log("[rspkr.setCoreLoaded] All dependencies for "+b+" have been loaded. Resuming its initiation."),h.push(b);var e=E(b);e.init.apply(e,[])}}a=a.replace("_",".");var c=d[a]===!1?[a]:d[a];e++;for(var f,g=0;f=c[g];g++){var j=E(f);if("function"==typeof j.init)if(j.dependency){if(!I(j.dependency)){rspkr.log("[rspkr.setCoreLoaded] Dependencies for "+f+" ("+j.dependency+") are not yet loaded. Putting it on hold."),i[f]=j.dependency.constructor===Array?j.dependency:[j.dependency];for(var k,l=i[f].length-1;k=i[f][l];l--)I(k)&&i[f].splice(l,1);continue}j.init.apply(j,[])}else j.init.apply(j,[]);b(f)}e===Object.size(d)&&(rspkr.Common.addEvent("onModsLoaded",function(){rspkr.pub.Config.setup(),rspkr.ds.unload(),rspkr.c.Detect.init(),rspkr.popup.init()}),u=!0,G("rsmod_lib.RSLib"))},G=function(a){h.push(a);var b=E(a);"function"==typeof b.init&&b.init.apply(b,[]),J()},H=function(b,c,d){if(d=void 0!==d,!d){h.push(b),j++,c=c||[b];for(var e=0,i=c.length;i>e;e++)try{var k=E(c[e]);"function"==typeof k.init&&k.init.apply(k,[])}catch(l){ba("[rspkr] Could not load: "+c[e]+" | "+l,3)}}if(j===f&&g===!0){ba("[rspkr] All prod mods loaded. _domready = "+p,4),A&&a.ReadSpeaker.loadInit(),a.ReadSpeaker.Common.addEvent("onReady",function(){rspkr.devt("onBeforeQueueExecuted",a),V.executeCode(),V.flush(),rspkr.devt("onAfterQueueExecuted",a),z&&ea()});var m=function(){rspkr.Common.createShortcuts(),rspkr.devt("onModsLoaded",a),rspkr.devt("onAfterModsLoaded",a),rspkr.devt("onReady",a),a.ReadSpeaker.ui.viewport={width:$rs.width(a),height:$rs.height(a)}};p?m():a.ReadSpeaker.Common.addEvent("onDOMReady",m)}},I=function(a){a.constructor===Array||(a=[a]);for(var b,c=0,d=0;b=h[d];d++)for(modsIndex=0,mod;mod=a[modsIndex];modsIndex++)if(b===mod){c++;break}return c===a.length},J=function(){if(u&&a.ReadSpeaker.modmap&&!m){for(var b=a.ReadSpeaker.modmap,d=[],e=0,h="|",i=[],j=0,k=t.length;k>j;j++)if(d=b.products&&"function"==typeof b.products[t[j]]?b.products[t[j]]():null){e=0;for(var l=0,n=d.length;n>l;l++)-1===h.indexOf("|"+d[l][0]+d[l][1]+"|")&&(d[l][0].length&&(i[d[l][0]]=d[l][2],W.load({id:"rsmod_"+d[l][0],type:d[l][1],src:c+"."+d[l][0]+("text/css"===d[l][1]?".css":".js"),cb:function(){var b=(a.event&&a.event.srcElement&&a.event.srcElement.id?a.event.srcElement.id:this.id).replace("rsmod_","");H(b,i[b])},async:!0})),"undefined"!=typeof d[l][1]&&/text\/javascript/.test(d[l][1])&&e++,h+=d[l][0]+d[l][1]+"|");f+=e}g=!0,0===d.length&&H(null,null,!0)}},K=function(){var b,e;if(a.rsConf&&a.rsConf.params&&"string"==typeof a.rsConf.params&&a.rsConf.params)b=a.rsConf.params,e=b.split("?");else{var f=document.getElementsByTagName("script"),g=f[f.length-1];b=g.getAttribute("src"),e=b.split("?")}if(/\?/i.test(b)&&e.length>1&&e[1].length){y=b.replace(/[^\/]*$/,""),w=ca();var h=U.extract(e[1]),i=U.extract(e[1]);q=h,r=h.skin||"default",t=h.pids.split(","),q.path=e[0].replace(/webReader\.js|ReadSpeaker\.js/i,""),q.mobile=q.mobile&&"1"===q.mobile?!0:!1,q.forceAdapter=q.forceAdapter||!1,"0"!==i.mobile&&/ios|iphone|ipad|ipod|android|windows phone/i.test(navigator.userAgent)&&(!q.mmax||a.innerWidth<(q.mmax||768))&&(q.mobile=!0),d["pub.Config"]=!1,q.mobile?(q.notools="1",C="-Mobile",D.push("rs_mobile"),d["Mobile-"+L().toLowerCase()]=["lib.Facade","Common","modmap","PlayerAPI","HL","Common.Settings","ui","ui.Slider","ui.Tools","ui.Lightbox","Mobile.Common"]):d.Core=["lib.Facade","Common","modmap","PlayerAPI","HL","Common.Settings","ui","ui.Slider","ui.Lightbox","ui.DragDrop","ui.Tools","ui.Detach"],q.disable||(q.disable="voicesettings");var j=q.disable.split(",");j.push("voicesettings"),document.documentMode&&document.documentMode<9&&(j.push("readhover"),j.push("enlarge"),j.push("simpleview"),j.push("pagemask"),j.push("translation"),j.push("lookup"),j.push("voicesettings"));for(var k=0;k<j.length;k++)a.rsConf&&a.rsConf.ui&&a.rsConf.ui.tools&&a.rsConf.ui.tools[j[k]]||Q.disabledTools[j[k]]||(Q.disabledTools[j[k]]=!0);if(q.enable)for(var n=q.enable.split(","),o=0;o<n.length;o++)a.rsConf&&a.rsConf.ui&&a.rsConf.ui.tools&&a.rsConf.ui.tools[n[o]]||Q.disabledTools[n[o]]&&delete Q.disabledTools[n[o]];if(z=q.autoplay,A=a.ReadSpeakerJIT="0"!==q.jit,q.notools&&"1"===q.notools||l.push(Q.toggler.add),q.noDefaultSkin&&"1"===q.noDefaultSkin||W.load({id:"rsmod_Styles",type:"text/css",src:c+".Styles"+(A?"-Button":"")+".css",cb:null}),"default"!==r&&(l.push(P),W.load({id:"rsskin_"+r+"_style",type:"text/css",src:"skins/"+r+"/"+r+".css",cb:null}),W.load({id:"rsskin_"+r+"_js",type:"text/javascript",src:"skins/"+r+"/"+r+".js",cb:null,async:!0})),q.dload&&q.dload.length){var p,s,u=q.dload.split(",");for(p=0,s=u.length;s>p;p++)W.load({id:"rsdloaded_"+X(),type:"text/javascript",src:c+"."+u[p]+".js",cb:null})}D.length&&l.push(M),(!A||N())&&O()}else m=!0},L=function(){if("string"==typeof q.forceAdapter&&q.forceAdapter.length){if("ioshtml5"!==q.forceAdapter)return q.forceAdapter;if(/apple/i.test(navigator.vendor)&&/ios|iphone|ipad|ipod/i.test(navigator.userAgent))return q.noLazyLoad=!0,q.forceAdapter="html5";q.forceAdapter=!1}return a.AudioContext||a.webkitAudioContext?"webAudio":"html5"},M=function(){for(var a=S(),b=0,c=a.length;c>b;b++)$rs.addClass(a[b],D.join(" "))},N=function(){function a(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return void 0}return"1"===a("_rspkrLoadCore")},O=function(){if(!n&&!v){if(v=!0,A&&(!q.noDefaultSkin||"1"!==q.noDefaultSkin)){var b=document.getElementById("rsmod_Styles");b&&b.parentElement.removeChild(b),W.load({id:"rsmod_Styles",type:"text/css",src:c+".Styles"+(C.length?C:"")+".css",cb:null})}for(var e in d)d.hasOwnProperty(e)&&(mod=e,W.load({id:"req_"+mod,type:"text/javascript",src:c+"."+mod+".js",cb:function(b){var c=a.event&&a.event.srcElement&&a.event.srcElement.id?a.event.srcElement.id:b;c&&F(c.replace("req_",""))},async:!0}))}},P=function(){rspkr.log("[rspkr.updateBaseClass] Attempting to update..");for(var a=document.getElementsByTagName("div"),b=/\brsbtn\b/,c=0,d=a.length;d>c;c++)b.test(a[c].className)&&(a[c].className=a[c].className.replace(b,"rsbtn "+r.toLowerCase()));rspkr.log("[rspkr.updateBaseClass] Update successful!")},Q={isLoaded:!1,isTogglerAdded:!1,disabledTools:{},toggler:{add:function(){if("1"!==q.notools)for(var b,c,d,e=S("rs_addtools"),f=0,g=e.length;g>f;f++)e[f]&&e[f].className&&-1===e[f].className.indexOf("rs_notools")&&(I("rsmod_lib.RSLib")&&a.ReadSpeaker.Sizzle&&(d=$rs.findIn(e[f],".rsbtn_toolpanel"),(rspkr.u&&$rs.isArray(d)&&!d.length||"undefined"==typeof d)&&rspkr.u.addTools()),e[f].querySelectorAll(".rsbtn_tooltoggle").length||(b=document.createElement("div"),b.innerHTML='<button type="button" class="rsbtn_tooltoggle" title="Open/close toolbar" style="display:none" aria-expanded="false"><i class="rsicn rsicn-arrow-down"></i><span class="rsbtn_btnlabel" style="width: 0px; height: 0px;">Open/close toolbar</span></button>',e[f].appendChild&&(c=e[f].appendChild(b.childNodes[0]),e[f].id&&e[f].id.length||(e[f].id=rspkr.getID()),$rs.setAttr(c,"data-rs-container",e[f].id),$rs.regEvent(c,"mouseover focus",Q.toggler.events.over),$rs.regEvent(c,"mouseout blur",Q.toggler.events.out),$rs.regEvent(c,"click",Q.toggler.events.click),rspkr.accessKeys=rspkr.accessKeys||{},rspkr.accessKeys[1]||(c.accessKey="1",rspkr.accessKeys[1]=1),Q.isTogglerAdded=!0)))},events:{over:function(a){rspkr.preventDefault(a),Q.zoomTogglerIn(document.getElementById($rs.getAttr(this,"data-rs-container")))},out:function(a){rspkr.preventDefault(a),Q.zoomTogglerOut(document.getElementById($rs.getAttr(this,"data-rs-container")))},click:function(a){rspkr.preventDefault(a),Q.load.apply(this,[a])}}},load:function(b){var c=this;b&&b.type&&b.type.indexOf("mouse")>-1?B[$rs.getAttr(c,"data-rsevent-id")]=a.setTimeout(function(){Q.dispatch(c)},500):Q.dispatch(c)},loadCancel:function(){B[$rs.getAttr(this,"data-rsevent-id")]&&a.clearTimeout(B[$rs.getAttr(this,"data-rsevent-id")])},dispatch:function(a){n?(Q.afterLoad.apply(a,[!0]),Q.open.apply(a,[])):(O(),k.push(function(){Q.afterLoad.apply(a,[!0]),Q.open.apply(a,[])}))},afterLoad:function(){for(var a,b=S("rs_addtools"),c=function(a){$rs.unregEvent(this,"mouseleave"),$rs.regEvent($rs.closest(a,".rsbtn_tools"),"mouseleave",function(){$rs.unregEvent(this,"mouseleave"),Q.close.apply(this,[])})},d=0,e=b.length;e>d;d++)a=$rs.findIn(b[d],".rsbtn_tooltoggle"),a&&(Q.isLoaded=!0,Q.loadCancel(),$rs.unregEvent(a,"click"),$rs.regEvent(a,"click",Q.toggle),rspkr.Common.addEvent("onToolClicked",c),rspkr.Common.addEvent("onConfigSetup",function(){for(var a,b=$rs.arr(".rsbtn_tooltoggle"),c=rspkr.cfg.getPhrase("toggletoolbar"),d=rspkr.cfg.getPhrase("toolbarwebreader"),e=0;a=b[e];e++)a.setAttribute("title",c),a.querySelectorAll(".rsbtn_btnlabel")[0].innerHTML=d}))},open:function(b){rspkr.ui.Tools.accessibility.isAccessKey(b)&&(rspkr.ui.Tools.accessibility.storeSelection(),rspkr.c.addEvent("onAfterToolsOpen",function(){rspkr.ui.Tools.accessibility.restoreSelection(),rspkr.c.clearEvent("onAfterToolsOpen",rspkr.ui.Tools.accessibility.restoreSelection)}));var c=Q.getPlayerContainer(this),d=$rs.findIn(c,".rsbtn_toolpanel");if(!$rs.getAttr(d,"data-full-width")){$rs.hasClass(c,"rsdetached")&&(c.style.width="1000px"),d.style.display="block";var e=$rs.width($rs.findIn(d,".rsbtn_tools"))+5;d.style.display="",$rs.hasClass(c,"rsdetached")&&(c.style.width=""),$rs.setAttr(d,"data-full-width",e),d.style.width=e+"px",d.style.minWidth=e+"px"}Q.zoomTogglerIn.apply(this,[c]),$rs.hasClass(c,"toolsopen")||(rspkr.devt("onBeforeToolsOpen","__self__",[c]),$rs.addClass(c,"toolsopen"),rspkr.devt("onAfterToolsOpen","__self__",[c])),$rs.setAttr($rs.findIn(c,".rsbtn_tooltoggle"),"aria-expanded","true");var f=$rs.findIn(c,".rsbtn_tooltoggle");if($rs.isArray(d)&&(d=d[0]),a.getComputedStyle){var g=document.defaultView.getComputedStyle(d).getPropertyValue("z-index");$rs.css(f,"z-index",parseInt(g)+1)}},close:function(a){rspkr.ui.Tools.accessibility.isAccessKey(a)&&(rspkr.ui.Tools.accessibility.storeSelection(),rspkr.c.addEvent("onAfterToolsClose",function(){rspkr.ui.Tools.accessibility.restoreSelection(),rspkr.c.clearEvent("onAfterToolsClose",rspkr.ui.Tools.accessibility.restoreSelection)}));var b=Q.getPlayerContainer(this);rspkr.devt("onBeforeToolsClose","__self__",[b]),$rs.removeClass(b,"toolsopen"),rspkr.devt("onAfterToolsClose","__self__",[b]),$rs.setAttr($rs.findIn(b,".rsbtn_tooltoggle"),"aria-expanded","false")},toggle:function(a){rspkr.preventDefault(a),Q.isLoaded&&($rs.hasClass(Q.getPlayerContainer(this),"toolsopen")?Q.close.apply(this,[a]):Q.open.apply(this,[a]))},getPlayerContainer:function(b){return $rs.closest(b,"."+(a.rspkr&&a.rspkr.u&&a.rspkr.u.rsbtnClass||"rsbtn")+",.rs_addtools")},zoomTogglerIn:function(a){$rs.addClass(a,"zoom-tooltoggler")},zoomTogglerOut:function(a){$rs.removeClass(a,"zoom-tooltoggler")}},R=function(){var b,c,d,e,f=39,g=30,h=30,i=function(){if(!e){var b;b=rspkr.cfg?rspkr.cfg.item("general.popupCloseTime")||2e3:2e3,e=a.setTimeout(function(){n()},b)}},j=function(){e&&(a.clearTimeout(e),e=null)},l=function(b){var c={},d=rspkr.ui?rspkr.ui.pointerX:a.ReadSpeaker.ds.pointerX,e=rspkr.ui?rspkr.ui.pointerY:a.ReadSpeaker.ds.pointerY,i=b.clientX+$rs.scrollLeft(document)||b.pageX||d,j=b.clientY+$rs.scrollTop(document)||b.pageY||e;return j>e||/OPR\//gi.test(navigator.userAgent)?j-$rs.scrollTop(document)+g>$rs.height(a)-(g+10)?c.top=j-(g+h):c.top=j+h:j-$rs.scrollTop(document)-(g+h)<10?c.top=j+h:c.top=j-(g+h/2),i-$rs.scrollLeft(document)<10?c.left=i+10:i-$rs.scrollLeft(document)>$rs.width(a)-(f+10)?c.left=$rs.width(a)+$rs.scrollLeft(document)-(f+10):c.left=i+0,c},m=function(d,e,h){if(rspkr.getRSBtns().length||a.rsConf&&a.rsConf.general&&a.rsConf.general.selectionPlayer&&a.rsConf&&a.rsConf.general&&a.rsConf.general.popupHref){var k=h||(rspkr.c?rspkr.c.data.selectedText.length:0);if(!(rspkr.st&&"iconon"!==rspkr.st.get("hlicon")||0===k)){for(var m,n=["rslightbox_contentcontainer","rslightbox_overlay","rsmask-top"],o=0;m=n[o];o++){var q=document.getElementById(m);if(q&&$rs.isVisible(q))return}if(!(rspkr.ui&&rspkr.ui.Tools&&rspkr.ui.Tools.ReadHover.active()||rspkr.c&&rspkr.c.data.selectedText===c||e&&e===c)){c=rspkr.c?rspkr.c.data.selectedText:e,b||(b=document.createElement("div"),b.className="rspopup"+("default"!==r?" "+r:""),document.body.appendChild(b),f=$rs.outerWidth(b),g=$rs.outerHeight(b),$rs.regEvent(b,"mousedown",p));var s=l(d);$rs.css(b,{left:s.left+"px",top:s.top+"px",zIndex:rspkr.u?rspkr.u.utils.getMaxZ()+10:1e3}),$rs.css(b,"display","block"),j(),i(),$rs.regEvent(b,"mouseover",j),$rs.regEvent(b,"mouseout",i)}}}},n=function(a){b&&($rs.css(b,"display","none"),j(a))},o=function(){rspkr.pl.releaseAdapter(),$rs.removeClass($rs.arr(".rs_textselection"),"rs_textselection"),c=null;var b=rspkr.ui.Detach.getDetachedPlayer(),d=$rs.findIn(b,"a.rsbtn_play");rspkr.u.Detach.check(),a.readpage(d)},p=function(b){if(rspkr.preventDefault(b),rspkr.pl)o();else{if(a.rsConf&&a.rsConf.general&&a.rsConf.general.confirmPolicy&&!confirm(a.rsConf.general.confirmPolicy))return n(),!1;rspkr.loadCore(),k.push(function(){o()})}n()},q=function(a){d=a?!0:void 0},s=function(){return d};return{init:function(){rspkr.c.addEvent("onSelectedText",m),rspkr.c.addEvent("onSelectedText",q.bind(void 0,!0)),rspkr.c.addEvent("onDeselectedText",n),rspkr.c.addEvent("onDeselectedText",q.bind(void 0,!1)),rspkr.log("[rspkr.Popup] Heartbeat!")},newTextSelected:s,closePopup:n,showPopup:m}}(),S=function(a){var b="default"===r?"rsbtn":"rsbtn."+r.toLowerCase(),c=[];if(document.querySelectorAll)a=a?",."+a:"",c=document.querySelectorAll("."+b+a);else{a=a?"|"+a+"\\b":"";for(var d=document.getElementsByTagName("div"),e=new RegExp(b+"\\b"+a,"i"),f=0,g=d.length;g>f;f++)d[f]&&d[f].className&&e.test(d[f].className)&&c.push(d[f])}return c},T=function(){Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}},U={extract:function(a){if("string"==typeof a){for(var b,c={},d=a.split(/[;&]/),e=0;e<d.length;e++)b=d[e].split("="),b&&2===b.length&&(c[unescape(b[0])]=unescape(b[1]).replace(/\+/g," "));return c}return{}},set:function(a,b,c){var d=new RegExp("([\\?&|&amp;]"+a+"=)[^&$]*","gi");return d.test(c)?c.replace(d,"$1"+b):c+"&"+a+"="+b},get:function(a,b){var c=new RegExp(a+"=([^&]*)","i"),d=b.match(c);return null!==d&&d.length>0?d[1]:null}},V={isok:!0,executeCode:function(b){var c="jit"===b?l:k;if(this.isok=!0,!c.length)return!0;for(idx in c)if(c.hasOwnProperty(idx)&&"function"==typeof c[idx])try{c[idx].apply(a,[])}catch(d){this.isok=!1,rspkr.log("[rspkr.q] "+d,3)}},flush:function(a){var b=a=l;b=[]}},W={load:function(c){var d={tjs:"text/javascript",tcss:"text/css"};if(c.type==d.tjs||c.type==d.tcss){c.src=q.path+c.src;var e=document.getElementsByTagName("head")[0],f=c.type==d.tjs?"script":"link",g=document.createElement(f),h=[b.major,b.minor,b.update,b.revision].join(".");"function"==typeof c.cb&&(void 0!==g.onreadystatechange?g.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&c.cb.apply(a,[c.id])}:g.onload=function(){c.cb.apply(a,[c.id])}),g.id=c.id.replace(".","_"),g.type=c.type,c.type==d.tjs?(g.src=c.src+"?v="+h,c.async&&(g.async=!0)):(g.rel="stylesheet",g.href=c.src+"?v="+h),c.type===d.tcss&&document.createStyleSheet?document.createStyleSheet(g.href):e.appendChild(g)}},jsonpLoad:function(a){var b=document.createElement("script");b.id=a.id||"rsjsonploaded_"+X(),b.src=a.src,b.async=!0,document.body.appendChild(b)}},X=function(){return"readspeaker"+o++},Y=0,Z={1:[],2:[],3:[],4:[],5:[],6:[]},$=function(a){rspkr.log("[rspkr.printErrorLog]",1);for(var a=a||"3",b=a.split(","),c=0;c<b.length;c++)Z.hasOwnProperty(b[c])&&_(Z[b[c]],b[c])},_=function(a,b){b=parseInt(b)||3;var c=aa[b].lbl;console.groupCollapsed&&console.groupCollapsed(c);for(var d=0;d<a.length;d++)try{console[aa[b].method]&&console[aa[b].method](a[d])}catch(e){}console.groupCollapsed&&console.groupEnd()},aa={1:{lbl:"Info",method:"log"},2:{lbl:"Warn",method:"warn"},3:{lbl:"Err",method:"error"},4:{lbl:"AS",method:"log"},5:{lbl:"SW",method:"log"}},ba=function(a,b){var c=(document.location.href,w);if(b=b||1,Z[b].push(a),c&&"string"==typeof c&&c.indexOf(","+b+",")>-1){var d=aa[b].lbl;try{console[aa[b].method]&&console[aa[b].method](Y++ +". "+d+": "+a)}catch(e){}}},ca=function(){var a;if(/rsdebug=rsdebug/i.test(document.location.href))try{a=","+document.location.href.split("?").pop().match(/rsdebug=rsdebug([^$|&]*)/i).pop()+","}catch(b){a=",3,"}else a="";return a},da=function(a){w=/^,[0-9,]*,$/.test(a)?a:","+a+","},ea=function(){rspkr.log("[rspkr.startAutoplay] Id: "+z);var b=$rs.get(z);if($rs.isArray(b)&&b.length)b=b[0];else if($rs.isArray(b)&&!b.length)return!1;var c=$rs.findIn(b,"a");if($rs.isArray(c)&&c.length)c=c[0];else if($rs.isArray(c)&&!c.length)return!1;a.readpage(c)},fa=function(){this.meta={obj:b,version:function(){return[b.major,b.minor,b.update].join(".")+"_rev"+b.revision+"-"+b.prod}()},this.q=function(b){"function"==typeof b&&(x.onReady?b.apply(a,[]):k.push(b))},this.loadInit=function(){if(document.readyState&&"loading"===document.readyState)return void setTimeout(function(){rspkr.log("[rspkr.loadInit] Postponing myself for 100 ms, DOM is not ready yet."),rspkr.loadInit()},100);if(!n){n=!0,document.addEventListener&&document.removeEventListener("DOMContentLoaded",a.ReadSpeaker.init,!1),p=!0,a.ReadSpeaker.Common&&a.ReadSpeaker.Common.dispatchEvent("onDOMReady"),ba("[rspkr] DOM Ready!"),s&&(ba("[rspkr] Updating base class.",1),P()),rspkr.Common&&rspkr.Common.data&&"function"==typeof rspkr.Common.data.setRegion&&"function"==typeof rspkr.Common.data.setWrapiUrl&&(rspkr.Common.data.setRegion(),rspkr.Common.data.setWrapiUrl());var b=rspkr.pub.Config.getPhrase("listenwebreader");if(b)for(var c=rspkr.getRSBtns(),d=0;d<c.length;d++){var e=$rs.findIn(c[d],".rsbtn_left .rsbtn_text .rsbtn_btnlabel");e&&(e.innerHTML=b)}Q.afterLoad()}},this.init=function(){rspkr.disp.executeCode("jit"),rspkr.disp.flush("jit"),a.ReadSpeakerJIT||rspkr.loadInit(),rspkr.DeferSelection.init(),rspkr.addToggler();for(var b,c=rspkr.getRSBtns(),d=0;b=c[d];d++){var e=b.querySelectorAll(".rsbtn_play")[0];$rs.setAttr(e,"aria-expanded",!1)}for(var c=rspkr.getRSBtns(),f=0;f<c.length;f++){var g=c[f].querySelectorAll(".rsbtn_text")[0],h=g?g.getElementsByTagName("span")[0]:void 0;if(g&&h){$rs.setAttr(h,"aria-hidden",!0);var i=document.createElement("span");i.className="rsbtn_btnlabel",i.innerHTML="Listen with ReadSpeaker",g.appendChild(i)}}if(c.length){var j=document.createElement("div");j.innerHTML='<button href="javascript:void(0)" tabindex="-1" accesskey="k" class="rsbtn_focusforward" aria-hidden="true"><span class="">Focus</span></button>',$rs.regEvent(j.childNodes[0],"click",function(a){$rs.findIn(c[0],".rsbtn_play").focus()}),c[0].appendChild(j.childNodes[0])}document.documentMode&&document.documentMode<9&&$rs.addClass(document.body,"legacy")},this.createAudio=function(){if(!a.rspkr.audio&&/ios|ipad|iphone|ipod|android|windows phone/i.test(a.navigator.userAgent)){if("html5"===L())this.createHTML5Audio();else{if("webAudio"!==L())return!1;this.createWebAudio()}return!0}return!1},this.createHTML5Audio=function(){return a.rspkr.audio=new Audio,a.rspkr.audio.muted=!0,a.rspkr.audio.load(),!0},this.createWebAudio=function(){a.rspkr.audio=new(a.AudioContext||a.webkitAudioContext),a.rspkr.audio.resume().then(function(){a.rspkr.audio.suspend().then(function(){})})},this.addToggler=Q.toggler.add,this.getLoadedMods=function(){return h},this.rsidCount=1e3,this.logcount=0,this.log=function(a,b){ba(a,b||1)},this.showLog=function(a){$(a||"1")},this.getID=function(){return X()},this.getVersion=function(){return this.meta.version},this.skin=r,this.disp=V,this.displog=x,this.params=q,this.extractParams=U.extract,this.setParam=U.set,this.getParam=U.get,this.setDebugLevel=da,this.baseUrl=y,this.loadCore=O,this.audio=null,this.getRSBtns=S,this.rsload=W,this.tools=Q,this.popup=R,this.notools=function(){return q.notools&&"1"===q.notools?!0:!1},this.mobile=function(){return q.mobile&&q.mobile===!0?!0:!1},this.preventDefault=function(b){b=b||a.event,b&&(b.originalEvent&&(b=b.originalEvent),b.cancelBubble=!0,b.returnValue=!1,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}};return T(),K(),new fa}();a.ReadSpeaker=a.rs=a.rspkr=b}(window),ReadSpeaker.enums={mime:{tjs:"text/javascript",tcss:"text/css",thtml:"text/html"}},function(i){var u=navigator.userAgent,e=eval("/*@cc_on! @*/false"),st=setTimeout;/mozilla/i.test(u)&&!/(compati)/.test(u)||/opera/i.test(u)||/webkit/i.test(u)||document.documentMode&&document.documentMode>8?document.addEventListener("DOMContentLoaded",i,!1):e?!function(){var a=document.createElement("doc:rdy");try{a.doScroll("left"),i(),a=null}catch(b){st(arguments.callee,0)}}():window.onload=i}(function(){rspkr.init()}),rspkr.lib||(rspkr.lib={}),rspkr.lib.Facade=function(a){var b=function(a,b,c){a=String(a),c=String(c),b="="==b?"==":b;for(var d,e,f=a.split("."),g=c.split("."),h=Math.max(f.length,g.length),i=0,j=0;h>j&&!i;j++)d=parseInt(f[j],10)||0,e=parseInt(g[j],10)||0,e>d&&(i=1),d>e&&(i=-1);switch(b){case"==":return 0==i;case"===":return 0===i;case"!=":return 0!=i;case"!==":return 0!==i;case"<":return i>0;case"<=":return i>=0;case">":return 0>i;case">=":return 0>=i;default:return!1}},c=[{name:"jquery",minver:"1.4.1",check:function(){if("function"==typeof jQuery){if("explorer"===rspkr.Common.data.browser.name.toLowerCase()&&rspkr.Common.data.browser.version<9&&b(jQuery.fn.jquery,"<",2))return!1;if(b(jQuery.fn.jquery,">=",this.minver))return!0}return!1}}],d={name:"RSLib",minver:"1.0"},e="",f=function(){if(rspkr&&rspkr.params&&rspkr.params.forceRSLib&&"1"===rspkr.params.forceRSLib)e=d.name;else{for(idx in c)if(c[idx]&&c[idx].check&&c[idx].check()){e=c[idx].name;break}e.length||(e=d.name)}},g=function(){a.$rs.flatten=function(a,b){b=b||[];for(var c,d=0;c=a[d];d++)$rs.isArray(c)?$rs.flatten(c,b):b.push(c);return b}},h={store:[],push:function(a,b,c){return this.store[a]||(this.store[a]=[]),this.store[a][b]||(this.store[a][b]=[]),this.store[a][b].push(c),this.store.length},pop:function(a,b,c){var d;if(this.store[a]&&this.store[a][b]){if(d=this.store[a][b],!c)return this.store[a][b].splice(0,this.store[a][b].length),0;for(var e=d.length-1;e>-1;e--)d[e]&&d[e].toString()===c.toString()&&this.store[a][b].splice(e,1);return this.store[a][b].length}return 0},dispatch:function(a,b){var c=$rs.convertEvent(a,b);if(rsid=$rs.getAttr(c.target,"data-rsevent-id"),rsid){for(var d=!0,e=h.store[rsid][c.type],f=0,g=e.length;g>f;f++)"function"==typeof e[f]&&(e[f].apply(c.target,[c])||(d=!1));return d}}};return{init:function(){f()},currentLib:function(){return e},setLib:function(a){e=a},eq:h,adapterInit:function(b){a.$rs=b,g()}}}(window),ReadSpeaker.lib.Facade.RSEvent=function(){},ReadSpeaker.lib||(ReadSpeaker.lib={}),ReadSpeaker.lib.RSLib=function(){var a={revision:"464"},b={core_pnum:function(){return/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source},rposition:function(){return/^(top|right|bottom|left)$/},rmargin:function(){return/^margin/},rnumsplit:function(){return new RegExp("^("+this.core_pnum+")(.*)$","i")},rnumnonpx:function(){return new RegExp("^("+this.core_pnum+")(?!px)[a-z%]+$","i")},rmsPrefix:function(){return/^-ms-/},rdashAlpha:function(){return/-([\da-z])/gi}},c={_formatRet:function(a){return a.length?1===a.length?a[0].length&&"object"==typeof a[0]&&!a[0].tagName?a[0][0]:a[0]:a:[]},get:function(a){return"#"===a?[]:"object"==typeof a?a:document.getElementById(a)||this._formatRet(window.ReadSpeaker.Sizzle(a))},arr:function(a){var b=this.get(a);return this.isArray(b)?b:[b]},findIn:function(a,b){return"string"==typeof a&&(a=this.get(a)),this._formatRet(window.ReadSpeaker.Sizzle(b,a))},closest:function(a,b){var c=!1,d=null,e=null,f=null,g=a;if("string"==typeof a&&(g=a=this.get(a)),f=$rs.findIn(g.parentNode,b),f===g)return g;for(;!c&&g!==document.body&&g&&g.parentNode&&(e=g.parentNode,e&&e.parentNode)&&(d=g.parentNode.parentNode);){if(f=$rs.findIn(d,b),f&&f===e){c=!0;break}if(f&&$rs.isArray(f)&&f.length)for(var h=0,i=f.length;i>h;h++)if(f[h]&&f[h]===e){c=!0,f=f[h];break}g=e}return c?f:void 0},getAttr:function(a,b){return"string"==typeof a&&(a=this.get(a)),"style"===b?a.style.cssText.toLowerCase()||void 0:a.getAttribute?a.getAttribute(b):a[b]?a[b]:void 0},setAttr:function(a,b,c){"string"==typeof a&&(a=this.get(a)),this.isArray(a)||(a=[a]);for(var d=0,e=a.length;e>d;d++)"style"===b?a[d].style.cssText=c:a[d].setAttribute?a[d].setAttribute(b,c):a[d][b]=c;return c},regEvent:function(a,b,c){var e,f,g,h,i=b.split(" ");"string"==typeof a&&(a=this.get(a)),this.isArray(a)||(a=[a]);for(var j=0,k=a.length;k>j;j++)for(g=0,h=i.length;h>g;g++)b=i[g],f=a[j],e=this.getAttr(f,"data-rsevent-id")||"rs_"+Math.round(1e6*Math.random()),this.setAttr(f,"data-rsevent-id",e),d.push(e,b,c),d.store[e]&&d.store[e][b]&&d.store[e][b].length>1||_addEvent(a[j],b,d.dispatch)},unregEvent:function(a,b,c){if(a){var e,f,g,h,i,j=b.split(" ");"string"==typeof a&&(a=this.get(a)),this.isArray(a)||(a=[a]);for(var k=0,l=a.length;l>k;k++)for(h=0,i=j.length;i>h;h++)if(b=j[h],e=a[k],f=this.getAttr(e,"data-rsevent-id"),c)g=d.pop(f,b,c),g||_removeEvent(a[k],b,d.dispatch);else if(_removeEvent(a[k],b,d.dispatch),f&&b){d.store[f][b]=void 0;try{delete d.store[f][b]}catch(m){}}}},fireEvent:function(a,b){return!1},width:function(a){return"string"==typeof a&&(a=this.get(a)),_getSize(a,"width")},height:function(a){return"string"==typeof a&&(a=this.get(a)),_getSize(a,"height")},innerWidth:function(a){"string"==typeof a&&(a=this.get(a));var b=parseFloat(_getCss(a,"border-left-width"))+parseFloat(_getCss(a,"border-right-width"));return _getSize(a,"width")-b},innerHeight:function(a){"string"==typeof a&&(a=this.get(a));var b=parseFloat(_getCss(a,"border-top-width"))+parseFloat(_getCss(a,"border-bottom-width"));return _getSize(a,"height")-b},outerWidth:function(a,b){if("string"==typeof a&&(a=this.get(a)),a&&a.style){var c=b?parseFloat(_getCss(a,"margin-left"))+parseFloat(_getCss(a,"margin-right")):0;return _getSize(a,"width")+c}return null},outerHeight:function(a,b){if("string"==typeof a&&(a=this.get(a)),a&&a.style){var c=b?parseFloat(_getCss(a,"margin-top"))+parseFloat(_getCss(a,"margin-bottom")):0;return _getSize(a,"height")+c}return null},offsetParent:function(a){"string"==typeof a&&(a=this.get(a));for(var b=/absolute|relative|fixed/i,c=a;c!==document.body&&(c=c.parentNode,!c.style||!b.test(_getCss(c,"position"))););return c||document.body},offset:function(a,b){"string"==typeof a&&(a=this.get(a));var c=document.body,d=document.defaultView||window,e=document.documentElement,f=document.createElement("div");if(a===document.body){var g=c.offsetTop,h=c.offsetLeft;return/explorer/i.test(rspkr.c.data.browser.name)&&rspkr.c.data.browser.version<8||(g+=parseFloat(_getCss(c,"marginTop"))||0,h+=parseFloat(_getCss(c,"marginLeft"))||0),{top:g,left:h}}f.style.paddingLeft=f.style.width="1px",c.appendChild(f);var i=2==f.offsetWidth;c.removeChild(f),f=a.getBoundingClientRect();var j=e.clientTop||c.clientTop||0,k=e.clientLeft||c.clientLeft||0,l=d.pageYOffset||i&&e.scrollTop||c.scrollTop,m=d.pageXOffset||i&&e.scrollLeft||c.scrollLeft;return rspkr.basicMode&&a===c&&l&&!f.top&&(f.top=-l),rspkr.basicMode&&a===c&&m&&!f.left&&(f.left=-m),{top:f.top+l-j,left:f.left+m-k}},absOffset:function(a){return this.offset(a)},position:function(a){return"string"==typeof a&&(a=this.get(a)),!1},scrollLeft:function(a,b){return"string"==typeof a&&(a=this.get(a)),_scrollXY("scrollLeft","pageXOffset",a,b)},scrollTop:function(a,b){return"string"==typeof a&&(a=this.get(a)),_scrollXY("scrollTop","pageYOffset",a,b)},addClass:function(a,b){"string"==typeof a&&(a=this.get(a)),this.isArray(a)||(a=[a]);for(var c,d=0,e=a.length;e>d;d++)a[d]&&!new RegExp("\\b"+b+"( |$)").test(a[d].className)&&(c=_trim(a[d].className+" "+b).replace(/ {2,}/g," ").split(" "),a[d].className=c.join(" "))},removeClass:function(a,b){if(a){"string"==typeof a&&(a=this.get(a)),this.isArray(a)||(a=[a]);for(var c,d=0,e=a.length;e>d;d++){c=_trim(b).replace(/ {2,}/g," "),newClassName=_trim(a[d].className),this.isArray(c)||(c=c.split(" "));for(var f=0,g=c.length;g>f;f++)newClassName=newClassName.replace(new RegExp("\\b"+c[f]+"\\b","gi"),"");a[d].className=_trim(newClassName).replace(/ {2,}/g," ")}}},hasClass:function(a,b){if("string"==typeof a&&(a=this.get(a)),!a||this.isArray(a)&&!a.length)return!1;for(var c=a.className.split(" "),d=0,e=c.length;e>d;d++)if(c[d]==b)return!0;return!1},css:function(a,b,c){if("string"==typeof a&&(a=this.get(a)),"object"!=typeof b&&!c)return _getCss(a,_camelCase(b));var d={};"string"==typeof b?d[_camelCase(b)]=c:d=b,$rs.isArray(a)||(a=[a]);for(var e in d)if(d.hasOwnProperty(e))for(var f=0,g=a.length;g>f;f++)a[f].style[_camelCase(e)]=d[e]},show:function(a){var b=this.getAttr(a,"data-rslib-prev-display")||"block";this.setAttr(a,"data-rslib-prev-display",""),this.css(a,"display",b)},hide:function(a){"string"==typeof a&&(a=this.get(a));var b=this.css(a,"display");"none"!==b&&(this.setAttr(a,"data-rslib-prev-display",b),this.css(a,"display","none"))},isVisible:function(a){for(;a!==document.body;){if("none"===this.css(a,"display"))return!1;a=a.parentNode}return!0},addStyleRule:function(a,b,c){var d="string"==typeof c?document.styleSheets[c]||document.getElementById(c):c;d.addRule?d.addRule(a,b):d.sheet.insertRule&&d.sheet.insertRule(a+" {"+b+"}",d.sheet.cssRules.length)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},rsid:function(a){if(""===this.getAttr(a,"data-rsid")||void 0===this.getAttr(a,"data-rsid")||null===this.getAttr(a,"data-rsid")){
var b=ReadSpeaker.rsidCount++;this.setAttr(a,"data-rsid",b)}return this.getAttr(a,"data-rsid")},detach:function(a){return a.parentNode.removeChild(a)},convertEvent:function(a,b){a=a||window.event;var c=new ReadSpeaker.lib.Facade.RSEvent;return c.pageX=a.pageX||a.clientX+$rs.scrollLeft(document),c.pageY=a.pageY||a.clientY+$rs.scrollTop(document),c.screenX=a.screenX,c.screenY=a.screenY,c.clientX=a.clientX,c.clientY=a.clientY,c.target=a.currentTarget||b,c.type=a.type,c.keyCode=a.keyCode,c.targetTouches=a.targetTouches,c.originalEvent=a,c},clone:function(a,b,c){return b=b||!1,c=c||!1,a.cloneNode(c)},camel:function(a){return _camelCase(a)},remove:function(a){for(var b=this.arr(a),c=[],d=0,e=b.length;e>d;d++)b[d].parentElement&&b[d].parentElement.removeChild&&c.push(b[d].parentElement.removeChild(b[d]));return c||[]},replaceWith:function(a,b){return _formatRet(jQuery(a).replaceWith(b))},focus:function(a,b){void 0!==b?this.focusIn(a,b):(a=this.get(a),this.isArray(a)&&a.length>0?a[0].focus?a[0].focus():a[0].setActive&&a[0].setActive():a.focus?a.focus():a.setActive&&a.setActive())},focusIn:function(a,b){if(a=this.get(a),this.isArray(a)&&a.length>0)for(var c=0;c<a.length;c++)void 0!==b&&_addEvent(a[c],"focus",b);else void 0!==b&&_addEvent(a,"focus",b)},focusOut:function(a,b){if(a=this.get(a),this.isArray(a)&&a.length>0)for(var c=0;c<a.length;c++)void 0!==b&&_addEvent(a[c],"blur",b);else void 0!==b&&_addEvent(a,"blur",b)}},d=null;return _getWindow=function(a){return null!==a&&a===a.window?a:9===a.nodeType?a.defaultView||a.parentWindow:!1},_camelCase=function(a){return a.replace(b.rmsPrefix(),"ms-").replace(b.rdashAlpha(),_fcamelCase)},_fcamelCase=function(a,b){return(b+"").toUpperCase()},_trim=function(a){return a.replace(/^ +/,"").replace(/ +$/,"")},_getCss=window.getComputedStyle?function(a,b){return window.getComputedStyle(a,null)[_camelCase(b)]||!1}:function(a,c){var d,e,f=a.currentStyle&&a.currentStyle[c],g=a.style;return null===f&&g&&g[c]&&(f=g[c]),b.rnumnonpx().test(f)&&!b.rposition().test(c)&&(d=g.left,e=a.runtimeStyle&&a.runtimeStyle.left,e&&(a.runtimeStyle.left=a.currentStyle.left),g.left="fontSize"===c?"1em":f,f=g.pixelLeft+"px",g.left=d,e&&(a.runtimeStyle.left=e)),""===f?"auto":f},_getSize=function(a,b){var c="width"==b?"Width":"Height";if(a!==window&&a!==document){var d=a["offset"+c];return(isNaN(d)||!d)&&(d=_getCss(a,b)),isNaN(d),parseInt(d)}try{if(a===window)return window["inner"+c]||document.documentElement["client"+c]||document.body["client"+c];if(a===document)return document.body["client"+c]}catch(e){return rspkr.log("[RSLib._getSize] Error: "+e.message,3),0}},_scrollXY=function(a,b,c,d){var e=/X/.test(b),f=_getWindow(c);return void 0===d?f?b in f?f[b]:f.document.documentElement[a]||document&&document.body&&document.body[a]:c[a]:void(f?f.scrollTo(e?$rs.scrollLeft(f):d,e?d:$rs.scrollTop(f)):c[a]=d)},_addEvent=document.addEventListener?function(a,b,c){a.addEventListener&&a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,function(b){c(b,a)})},_removeEvent=document.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},{meta:a,init:function(){d=ReadSpeaker.lib.Facade.eq,ReadSpeaker.lib.Facade.adapterInit(c),ReadSpeaker.log("[rspkr.l.RSLib] Initialized.")}}}(),ReadSpeaker.lib.RSLib.init(),function(a){var b=function(){var c={browser:{name:"",flashVersion:"",version:"",OS:"",html5AudioFormat:"",html5Support:!1,html5Priority:!1,syncContainer:"",webAudioSupport:!1,fetchSupport:!1},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"Chromium",identity:"Chromium"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",versionSearch:"Version",identity:"Safari"},{prop:a.opera,versionSearch:"Version",identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"MSIE",versionSearch:"MSIE",identity:"Explorer"},{test:function(){return/trident\//i.test(navigator.userAgent)&&!(!document.uniqueID&&!a.MSInputMethodContext)},versionSearch:"rv",identity:"Explorer"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"Gecko",versionSearch:"rv",identity:"Mozilla"},{string:navigator.userAgent,subString:"Mozilla",versionSearch:"Mozilla",identity:"Netscape"}],dataOS:[{string:navigator.platform,subString:"ARM",identity:"Windows Phone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],browserSettings:{Android:{minver:4},Explorer:{syncContainer:"font"},Firefox:{minver:6},Opera:{html5Support:!1,priority:!1},Edge:{audioFormat:"mp3"}}},d=function(){try{if(document.selection){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(b){return"6,0,0"}}catch(b){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(c){}}catch(b){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(c){}}return"0,0,0"},e=function(a){for(var b=0;b<a.length;b++){if(this.versionSearchString=a[b].versionSearch||a[b].identity,a[b].test&&a[b].test())return a[b].identity;var c=a[b].string,d=a[b].prop;if(c){if(-1!==c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},f=function(a){var b=a.indexOf(this.versionSearchString);if(-1!==b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},g=function(){return"function"==typeof a.fetch},h=function(){return!(!a.AudioContext&&!a.webkitAudioContext)},i=function(){rspkr.log("[rspkr.br] Initialized!");var a=navigator.userAgent;c.browser.name=e(c.dataBrowser)||"Unknown",c.browser.version=f(a)||f(navigator.appVersion)||"Unknown",c.browser.OS=e(c.dataOS)||"Unknown",c.browser.flashVersion=d(),rspkr.log("[rspkr.br.init] Flash: "+c.browser.flashVersion,1);var b=c.browser.name;if(c.browserSettings.hasOwnProperty(c.browser.name)||(c.browserSettings[b]={}),rspkr.pub&&"default"!==rspkr.pub.Config.item("general.syncContainer")?c.browser.syncContainer=rspkr.pub.Config.item("general.syncContainer"):c.browserSettings[b].hasOwnProperty("syncContainer")?c.browser.syncContainer=c.browserSettings[b].syncContainer:c.browser.syncContainer="rs:span",c.browserSettings[b].hasOwnProperty("html5Support")?c.browser.html5Support=c.browserSettings[b].html5Support:document.createElement("audio").canPlayType&&(c.browser.html5Support=!0),c.browser.html5Support===!0){var i=document.createElement("audio"),j=!1,k=!1;i.canPlayType&&(j=i.canPlayType("audio/mpeg"),k=i.canPlayType('audio/ogg; codecs="vorbis"')),rspkr.log("mp3 support? "+j,1),rspkr.log("ogg support? "+k,1),/android/i.test(rspkr.Common.data.browser.OS)&&j?c.browser.html5AudioFormat="mp3":/android/i.test(c.browser.OS)?c.browser.html5AudioFormat="ogg":""!==j?c.browser.html5AudioFormat="mp3":""!==k?c.browser.html5AudioFormat="ogg":c.browser.html5Support=!1,c.browserSettings[b].hasOwnProperty("html5Priority")?c.browser.html5Priority=c.browserSettings[b].priority:c.browser.html5Priority=!0,c.browserSettings[b].hasOwnProperty("audioFormat")&&(c.browser.html5AudioFormat=c.browserSettings[b].audioFormat)}c.browserSettings[b].hasOwnProperty("minver")&&parseFloat(c.browser.version)<=parseFloat(c.browserSettings[b].minver)&&(c.browser.html5Priority=!1),c.browser.webAudioSupport=h(),c.browser.fetchSupport=g()};return new(b=function(){this.init=i,this.info=c.browser})}();a.ReadSpeaker.Browser=a.ReadSpeaker.br=b}(window),function(a){var b=function(){var b,c,d,e=function(e){return b=e,a.getSelection?(c=a.getSelection().toString(),d=c.length):document.selection?(c=document.selection.createRange().text,d=c.length):document.getSelection&&(c=document.getSelection().toString(),d=c.length),d>0?ReadSpeaker.popup.showPopup(b,c,d):ReadSpeaker.popup.closePopup(b),!0},f=function(b){return setTimeout(function(){a.ReadSpeaker.DeferSelection.saveSelection(b)},50),!0},g=function(){return b},h=function(b){a.ReadSpeaker.ds.pointerX=b.pageX,a.ReadSpeaker.ds.pointerY=b.pageY},i=function(){var b=navigator.userAgent,c=a.ReadSpeaker.DeferSelection;b&&(/iphone|ipad|ios|android|windows phone/i.test(b.OS)||b.toLowerCase().match("android"))?($rs.regEvent(document.body,"touchend",c.saveSelection),$rs.regEvent(document,"selectionchange",c.saveSelection)):(b.toLowerCase().match("opera")?($rs.regEvent(document.body,"mouseup",c.saveSelectionOpera),$rs.regEvent(a,"mouseup",c.saveSelectionOpera)):($rs.regEvent(document.body,"mouseup",c.saveSelection),$rs.regEvent(a,"mouseup",c.saveSelection)),$rs.regEvent(document.body,"keyup",c.saveSelection)),$rs.regEvent(document.body,"mousedown",c.saveMousePosition)},j=function(){var c=a.ReadSpeaker.DeferSelection;$rs.unregEvent(document.body,"touchend",c.saveSelection),$rs.unregEvent(document,"selectionchange",c.saveSelection),$rs.unregEvent(document.body,"mouseup",c.saveSelectionOpera),$rs.unregEvent(a,"mouseup",c.saveSelectionOpera),$rs.unregEvent(document.body,"mouseup",c.saveSelection),$rs.unregEvent(a,"mouseup",c.saveSelection),$rs.unregEvent(document.body,"keyup",c.saveSelection),$rs.unregEvent(document.body,"mousedown",c.saveMousePosition),rspkr&&rspkr.c.data.setSelectedText&&rspkr.c.data.setSelectedText(b)},k=function(){this.saveSelectionOpera=this.sso=f,this.saveSelection=this.ss=e,this.saveMousePosition=this.smp=h,this.getSelection=this.gs=g,this.unload=j,this.init=i};return new k}();a.ReadSpeaker.DeferSelection=a.ReadSpeaker.ds=b}(window);